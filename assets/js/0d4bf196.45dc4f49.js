"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[43],{727:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>x,frontMatter:()=>l,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"documents/api","title":"APIs","description":"1. API \u7e3d\u89bd","source":"@site/docs/documents/api.md","sourceDirName":"documents","slug":"/documents/api","permalink":"/llmbrick/docs/documents/api","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":0,"frontMatter":{"sidebar_position":0},"sidebar":"documentsSidebar","previous":{"title":"\u6587\u4ef6","permalink":"/llmbrick/docs/documents/all"},"next":{"title":"Bricks","permalink":"/llmbrick/docs/category/bricks"}}');var d=s(4848),i=s(8453);const l={sidebar_position:0},t="APIs",c={},h=[{value:"1. API \u7e3d\u89bd",id:"1-api-\u7e3d\u89bd",level:2},{value:"\u652f\u63f4\u5354\u5b9a",id:"\u652f\u63f4\u5354\u5b9a",level:3},{value:"API \u4f7f\u7528\u60c5\u5883",id:"api-\u4f7f\u7528\u60c5\u5883",level:3},{value:"2. \u4e3b\u8981 API \u985e\u578b",id:"2-\u4e3b\u8981-api-\u985e\u578b",level:2},{value:"3. \u7aef\u9ede\u8207\u65b9\u6cd5\u8aaa\u660e",id:"3-\u7aef\u9ede\u8207\u65b9\u6cd5\u8aaa\u660e",level:2},{value:"3.1 SSE API",id:"31-sse-api",level:3},{value:"\u7aef\u9ede",id:"\u7aef\u9ede",level:4},{value:"\u8acb\u6c42\u7bc4\u4f8b",id:"\u8acb\u6c42\u7bc4\u4f8b",level:4},{value:"\u56de\u61c9\u7bc4\u4f8b",id:"\u56de\u61c9\u7bc4\u4f8b",level:4},{value:"Python Handler \u7bc4\u4f8b",id:"python-handler-\u7bc4\u4f8b",level:4},{value:"JavaScript \u5ba2\u6236\u7aef\u4e32\u6d41\u7bc4\u4f8b",id:"javascript-\u5ba2\u6236\u7aef\u4e32\u6d41\u7bc4\u4f8b",level:4},{value:"3.2 gRPC API",id:"32-grpc-api",level:3},{value:"gRPC \u901a\u7528\u8a2d\u8a08\u8aaa\u660e",id:"grpc-\u901a\u7528\u8a2d\u8a08\u8aaa\u660e",level:4},{value:"4. \u578b\u5225\u5b9a\u7fa9\u8207\u8cc7\u6599\u7d50\u69cb",id:"4-\u578b\u5225\u5b9a\u7fa9\u8207\u8cc7\u6599\u7d50\u69cb",level:2},{value:"4.1 ConversationSSERequest\uff08\u4e3b\u578b\u614b\uff09",id:"41-conversationsserequest\u4e3b\u578b\u614b",level:3},{value:"4.2 ConversationSSEResponse\uff08\u4e3b\u578b\u614b\uff09",id:"42-conversationsseresponse\u4e3b\u578b\u614b",level:3},{value:"4.3 \u5b50\u578b\u614b\u8aaa\u660e",id:"43-\u5b50\u578b\u614b\u8aaa\u660e",level:3},{value:"Message",id:"message",level:4},{value:"SSEContext",id:"ssecontext",level:4},{value:"SSEResponseMetadata",id:"sseresponsemetadata",level:4},{value:"4.4 \u6b04\u4f4d\u547d\u540d\u8207 JSON \u683c\u5f0f",id:"44-\u6b04\u4f4d\u547d\u540d\u8207-json-\u683c\u5f0f",level:3},{value:"5. \u932f\u8aa4\u8655\u7406\u8207\u56de\u5831",id:"5-\u932f\u8aa4\u8655\u7406\u8207\u56de\u5831",level:2},{value:"HTTP \u6a19\u6e96\u72c0\u614b\u78bc",id:"http-\u6a19\u6e96\u72c0\u614b\u78bc",level:3},{value:"\u6846\u67b6\u7279\u5b9a\u932f\u8aa4\u78bc",id:"\u6846\u67b6\u7279\u5b9a\u932f\u8aa4\u78bc",level:3},{value:"\u5e38\u898b\u932f\u8aa4\u60c5\u5883",id:"\u5e38\u898b\u932f\u8aa4\u60c5\u5883",level:3},{value:"\u932f\u8aa4\u683c\u5f0f\u8207\u8655\u7406\u5efa\u8b70",id:"\u932f\u8aa4\u683c\u5f0f\u8207\u8655\u7406\u5efa\u8b70",level:3},{value:"\u932f\u8aa4\u56de\u61c9\u7bc4\u4f8b",id:"\u932f\u8aa4\u56de\u61c9\u7bc4\u4f8b",level:4},{value:"\u5176\u4ed6\u932f\u8aa4\u56de\u61c9\u7bc4\u4f8b",id:"\u5176\u4ed6\u932f\u8aa4\u56de\u61c9\u7bc4\u4f8b",level:4},{value:"Troubleshooting \u6307\u5357",id:"troubleshooting-\u6307\u5357",level:3},{value:"6. FAQ \u8207\u9032\u968e\u61c9\u7528",id:"6-faq-\u8207\u9032\u968e\u61c9\u7528",level:2},{value:"\u5e38\u898b\u554f\u984c",id:"\u5e38\u898b\u554f\u984c",level:3},{value:"\u9032\u968e\u4e32\u63a5\u6280\u5de7",id:"\u9032\u968e\u4e32\u63a5\u6280\u5de7",level:3},{value:"7. \u53c3\u8003\u8cc7\u6e90",id:"7-\u53c3\u8003\u8cc7\u6e90",level:2}];function o(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"apis",children:"APIs"})}),"\n",(0,d.jsx)(n.h2,{id:"1-api-\u7e3d\u89bd",children:"1. API \u7e3d\u89bd"}),"\n",(0,d.jsx)(n.p,{children:"LLMBrick \u63d0\u4f9b\u9ad8\u6548\u3001\u578b\u614b\u5b89\u5168\u7684 AI \u61c9\u7528 API\uff0c\u652f\u63f4\u591a\u7a2e\u5354\u5b9a\uff08SSE\u3001gRPC\uff09\uff0c\u9069\u5408\u5c0d\u8a71\u751f\u6210\u3001\u4e32\u6d41\u56de\u61c9\u3001\u5206\u6563\u5f0f\u670d\u52d9\u7b49\u591a\u5143\u5834\u666f\u3002\u8a2d\u8a08\u7406\u5ff5\u5f37\u8abf\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u5354\u5b9a\u5f48\u6027"}),"\uff1a\u540c\u4e00\u5957 Brick \u53ef\u540c\u6642\u652f\u63f4 SSE \u8207 gRPC\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u578b\u5225\u660e\u78ba"}),"\uff1a\u6240\u6709\u8acb\u6c42/\u56de\u61c9\u7686\u6709\u56b4\u8b39\u578b\u5225\u5b9a\u7fa9\uff0c\u4fbf\u65bc\u524d\u5f8c\u7aef\u5354\u4f5c\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u4e32\u6d41\u53cb\u5584"}),"\uff1a\u652f\u63f4\u591a\u6b21\u56de\u61c9\u3001\u5373\u6642\u63a8\u64ad\uff0c\u9069\u5408 LLM \u61c9\u7528\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u652f\u63f4\u5354\u5b9a",children:"\u652f\u63f4\u5354\u5b9a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"SSE\uff08Server-Sent Events\uff09"}),"\uff1a\u4e3b\u529b\u5354\u5b9a\uff0c\u9069\u5408\u5373\u6642\u4e32\u6d41\u56de\u61c9\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"gRPC"}),"\uff1a\u9ad8\u6548\u80fd\u3001\u8de8\u8a9e\u8a00 RPC\uff0c\u9069\u5408\u5206\u6563\u5f0f\u90e8\u7f72\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"api-\u4f7f\u7528\u60c5\u5883",children:"API \u4f7f\u7528\u60c5\u5883"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u4e32\u6d41\u804a\u5929\u6a5f\u5668\u4eba"}),"\n",(0,d.jsx)(n.li,{children:"\u591a\u8f2a\u5c0d\u8a71\u3001\u5373\u6642\u56de\u994b"}),"\n",(0,d.jsx)(n.li,{children:"\u8de8\u8a9e\u8a00\u3001\u8de8\u5e73\u53f0 AI \u670d\u52d9\u4e32\u63a5"}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"2-\u4e3b\u8981-api-\u985e\u578b",children:"2. \u4e3b\u8981 API \u985e\u578b"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"SSE API"}),"\uff1aHTTP POST \u8acb\u6c42\uff0c\u56de\u61c9\u70ba SSE \u4e32\u6d41\u4e8b\u4ef6\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"gRPC API"}),"\uff1a\u591a\u7a2e Brick \u7686\u6709\u5c0d\u61c9 gRPC \u670d\u52d9\uff0c\u652f\u63f4 Unary/Streaming\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"3-\u7aef\u9ede\u8207\u65b9\u6cd5\u8aaa\u660e",children:"3. \u7aef\u9ede\u8207\u65b9\u6cd5\u8aaa\u660e"}),"\n",(0,d.jsx)(n.h3,{id:"31-sse-api",children:"3.1 SSE API"}),"\n",(0,d.jsx)(n.h4,{id:"\u7aef\u9ede",children:"\u7aef\u9ede"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"POST /chat/completions"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u8acb\u6c42\uff1a",(0,d.jsx)(n.code,{children:"ConversationSSERequest"})," (JSON)"]}),"\n",(0,d.jsxs)(n.li,{children:["\u56de\u61c9\uff1a",(0,d.jsx)(n.code,{children:"ConversationSSEResponse"})," (SSE \u4e32\u6d41)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u8acb\u6c42\u7bc4\u4f8b",children:"\u8acb\u6c42\u7bc4\u4f8b"}),"\n",(0,d.jsxs)(n.admonition,{title:"\u5fc5\u9808\u8a2d\u5b9a Accept Header",type:"tip",children:[(0,d.jsxs)(n.p,{children:["SSE API ",(0,d.jsx)(n.strong,{children:"\u8acb\u6c42\u6642\uff0cHTTP headers \u5fc5\u9808\u5305\u542b"}),"\uff1a"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-http",children:"Accept: text/event-stream\n"})}),(0,d.jsxs)(n.p,{children:["\u5426\u5247\u5c07\u7121\u6cd5\u6b63\u78ba\u53d6\u5f97\u4e32\u6d41\u56de\u61c9\uff0c\u4e14\u6703\u56de\u50b3 406 Not Acceptable \u932f\u8aa4\u3002\n\u8acb\u53c3\u8003\u4e0b\u65b9 JavaScript \u7bc4\u4f8b\u8207",(0,d.jsx)(n.a,{href:"#%E9%8C%AF%E8%AA%A4%E8%99%95%E7%90%86%E8%88%87%E5%9B%9E%E5%A0%B1",children:"\u932f\u8aa4\u8655\u7406"}),"\u7ae0\u7bc0\u3002"]})]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "model": "gpt-4o",\n  "messages": [\n    {"role": "system", "content": "You are a helpful assistant."},\n    {"role": "user", "content": "What is the weather like today?"}\n  ],\n  "stream": true,\n  "clientId": "client123",\n  "sessionId": "1234567890",\n  "temperature": 0.7,\n  "maxTokens": 100\n}\n'})}),"\n",(0,d.jsx)(n.h4,{id:"\u56de\u61c9\u7bc4\u4f8b",children:"\u56de\u61c9\u7bc4\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "id": "1",\n  "type": "text",\n  "model": "gpt-4o",\n  "text": "Hello, this is a streaming response.",\n  "progress": "IN_PROGRESS",\n  "context": {\n    "conversationId": "1234567890",\n    "cursor": "abcdefg12345"\n  },\n  "metadata": {\n    "searchResults": {"results": ["result1", "result2"]},\n    "attachments": [\n      {"type": "image", "url": "http://example.com/image.jpg"}\n    ]\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h4,{id:"python-handler-\u7bc4\u4f8b",children:"Python Handler \u7bc4\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'from llmbrick.servers.sse.server import SSEServer\nfrom llmbrick.protocols.models.http.conversation import ConversationSSEResponse\n\nserver = SSEServer()\n\n@server.handler\nasync def chat_handler(request_data):\n    user_message = request_data["messages"][-1]["content"]\n    yield ConversationSSEResponse(\n        id="response-1",\n        type="text",\n        text=f"You said: {user_message}",\n        progress="DONE"\n    )\n\nif __name__ == "__main__":\n    server.run(host="0.0.0.0", port=8000)\n'})}),"\n",(0,d.jsx)(n.h4,{id:"javascript-\u5ba2\u6236\u7aef\u4e32\u6d41\u7bc4\u4f8b",children:"JavaScript \u5ba2\u6236\u7aef\u4e32\u6d41\u7bc4\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:"fetch('/chat/completions', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'text/event-stream'\n  },\n  body: JSON.stringify({\n    model: 'gpt-4o',\n    messages: [{ role: 'user', content: 'Hello!' }],\n    stream: true,\n    sessionId: 'test-session-123'\n  })\n}).then(response => {\n  const reader = response.body.getReader();\n  function readStream() {\n    return reader.read().then(({ done, value }) => {\n      if (done) return;\n      const chunk = new TextDecoder().decode(value);\n      console.log('Received:', chunk);\n      return readStream();\n    });\n  }\n  return readStream();\n});\n"})}),"\n",(0,d.jsx)(n.admonition,{type:"warning",children:(0,d.jsxs)(n.p,{children:[(0,d.jsxs)(n.strong,{children:["\u6ce8\u610f\uff1aSSE \u4e32\u6d41 API \u5fc5\u9808\u8a2d\u5b9a ",(0,d.jsx)(n.code,{children:"Accept: text/event-stream"})," header\uff01"]}),"\n\u82e5\u672a\u6b63\u78ba\u8a2d\u5b9a\uff0c\u4f3a\u670d\u5668\u5c07\u56de\u50b3 406 Not Acceptable \u932f\u8aa4\uff0c\u7121\u6cd5\u53d6\u5f97\u4e32\u6d41\u8cc7\u6599\u3002"]})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"32-grpc-api",children:"3.2 gRPC API"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u6bcf\u500b Brick\uff08\u5982 LLM\u3001Guard\u3001Compose \u7b49\uff09\u7686\u6709\u5c0d\u61c9 gRPC \u670d\u52d9\uff0c\u652f\u63f4 Unary/Streaming\u3002"}),"\n",(0,d.jsxs)(n.li,{children:["\u7aef\u9ede\u3001\u65b9\u6cd5\u3001\u578b\u5225\u8a73\u898b ",(0,d.jsx)(n.a,{href:"../category/bricks/",children:"Bricks \u6587\u4ef6"})," \u8207 ",(0,d.jsx)(n.a,{href:"https://github.com/JiHungLin/llmbrick/tree/main/llmbrick/protocols/grpc",children:"proto \u5b9a\u7fa9"}),"\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"grpc-\u901a\u7528\u8a2d\u8a08\u8aaa\u660e",children:"gRPC \u901a\u7528\u8a2d\u8a08\u8aaa\u660e"}),"\n",(0,d.jsx)(n.p,{children:"LLMBrick \u7684 gRPC API \u63a1\u7528\u9ad8\u5ea6\u901a\u7528\u3001\u578b\u614b\u5b89\u5168\u7684\u8a2d\u8a08\uff0c\u65b9\u4fbf\u64f4\u5145\u8207\u8de8\u8a9e\u8a00\u4e32\u63a5\u3002\n\u4e3b\u8981\u7279\u8272\u5982\u4e0b\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"\u56db\u7a2e\u547c\u53eb\u578b\u614b"}),"\uff08\u5c0d\u61c9 gRPC \u6a19\u6e96\u8207 Python decorator\uff09\uff1a"]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u547c\u53eb\u578b\u614b"}),(0,d.jsx)(n.th,{children:"gRPC \u65b9\u6cd5"}),(0,d.jsx)(n.th,{children:"Python decorator"}),(0,d.jsx)(n.th,{children:"\u7528\u9014\u8aaa\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Unary"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Unary"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@unary_handler"})}),(0,d.jsx)(n.td,{children:"\u4e00\u822c\u8acb\u6c42/\u56de\u61c9"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Server Streaming"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"OutputStreaming"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@output_streaming_handler"})}),(0,d.jsx)(n.td,{children:"\u4f3a\u670d\u5668\u591a\u6b21\u56de\u61c9\uff08\u5982\u4e32\u6d41\uff09"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Client Streaming"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"InputStreaming"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@input_streaming_handler"})}),(0,d.jsx)(n.td,{children:"\u5ba2\u6236\u7aef\u591a\u6b21\u9001\u8cc7\u6599"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Bidi Streaming"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"BidiStreaming"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"@bidi_streaming_handler"})}),(0,d.jsx)(n.td,{children:"\u96d9\u5411\u4e32\u6d41"})]})]})]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"\u901a\u7528\u8a0a\u606f\u683c\u5f0f"}),"\uff08\u898b ",(0,d.jsx)(n.a,{href:"https://github.com/JiHungLin/llmbrick/blob/main/llmbrick/protocols/grpc/common/common.proto",children:(0,d.jsx)(n.code,{children:"common.proto"})}),"\uff09\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"CommonRequest"}),"/",(0,d.jsx)(n.code,{children:"CommonResponse"})," \u4ee5 ",(0,d.jsx)(n.code,{children:"google.protobuf.Struct"})," \u50b3\u905e\u5f48\u6027\u8cc7\u6599\u7d50\u69cb\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"ErrorDetail"})," \u7d71\u4e00\u932f\u8aa4\u56de\u5831\u683c\u5f0f\uff0c\u4fbf\u65bc\u524d\u5f8c\u7aef\u81ea\u52d5\u8655\u7406\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"ServiceInfoRequest"}),"/",(0,d.jsx)(n.code,{children:"ServiceInfoResponse"})," \u652f\u63f4\u670d\u52d9\u767c\u73fe\u8207\u6a21\u578b\u8cc7\u8a0a\u67e5\u8a62\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"\u670d\u52d9\u4ecb\u9762\u7bc4\u4f8b"}),"\uff08proto \u5b9a\u7fa9\uff09\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-proto",children:"service CommonService {\n  rpc GetServiceInfo(ServiceInfoRequest) returns (ServiceInfoResponse);\n  rpc Unary (CommonRequest) returns (CommonResponse) {}\n  rpc OutputStreaming (CommonRequest) returns (stream CommonResponse) {}\n  rpc InputStreaming (stream CommonRequest) returns (CommonResponse) {}\n  rpc BidiStreaming (stream CommonRequest) returns (stream CommonResponse) {}\n}\n"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Python Handler \u5be6\u4f5c\u65b9\u5f0f"}),"\uff08\u4ee5 ",(0,d.jsx)(n.code,{children:"llmbrick/core/brick.py"})," \u70ba\u4f8b\uff09\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Class-level Decorator\uff08\u5e38\u898b\u5beb\u6cd5\uff09"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'from llmbrick.core.brick import BaseBrick, unary_handler, output_streaming_handler\n\nclass MyBrick(BaseBrick):\n    @unary_handler\n    async def my_unary(self, request):\n        # \u8655\u7406\u55ae\u6b21\u8acb\u6c42\n        return {"result": "ok"}\n\n    @output_streaming_handler\n    async def my_stream(self, request):\n        for i in range(3):\n            yield {"chunk": i}\n'})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"\u7269\u4ef6\u5c0e\u5411 Decorator\uff08\u76f4\u63a5\u8a3b\u518a\u51fd\u5f0f\uff09"}),"\n\u4e5f\u53ef\u76f4\u63a5\u7528 Brick \u7269\u4ef6\u7684 decorator \u65b9\u6cd5\uff08\u5982 ",(0,d.jsx)(n.code,{children:".unary()"}),"\u3001",(0,d.jsx)(n.code,{children:".output_streaming()"}),"\uff09\u8a3b\u518a handler\uff0c\u5e38\u7528\u65bc script/demo \u6216\u4e0d\u9700\u81ea\u8a02 class \u7684\u60c5\u5883\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-python",children:'from llmbrick.bricks.common import CommonBrick\n\ncommon_brick = CommonBrick()\n\n@common_brick.unary()\nasync def my_unary(request):\n    return {"result": "ok"}\n\n@common_brick.output_streaming()\nasync def my_stream(request):\n    for i in range(3):\n        yield {"chunk": i}\n\n# \u4e4b\u5f8c\u53ef\u5c07 common_brick \u7269\u4ef6\u8a3b\u518a\u5230 server \u6216\u76f4\u63a5\u7528\u65bc\u6e2c\u8a66\n'})}),"\n",(0,d.jsx)(n.p,{children:"\u9019\u7a2e\u5beb\u6cd5\u9069\u5408\u5feb\u901f\u8a3b\u518a handler\uff0c\u7121\u9700\u81ea\u8a02 class\uff0c\u8207 class-level decorator \u5beb\u6cd5\u7b49\u50f9\uff0c\u4f9d\u5c08\u6848\u9700\u6c42\u9078\u64c7\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"\u64f4\u5145\u8207\u81ea\u8a02"}),"\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u53ef\u4f9d\u9700\u6c42\u81ea\u8a02 handler\uff0c\u4e26\u7528 decorator \u6a19\u8a3b\u578b\u614b\u3002"}),"\n",(0,d.jsx)(n.li,{children:"\u652f\u63f4\u81ea\u52d5\u8a3b\u518a\u8207\u578b\u5225\u6aa2\u67e5\uff0c\u907f\u514d handler \u5be6\u4f5c\u932f\u8aa4\u3002"}),"\n",(0,d.jsxs)(n.li,{children:["\u670d\u52d9\u8cc7\u8a0a\u67e5\u8a62\uff08",(0,d.jsx)(n.code,{children:"GetServiceInfo"}),"\uff09\u53ef\u56de\u5831\u6a21\u578b\u652f\u63f4\u3001\u7248\u672c\u3001\u4e32\u6d41\u80fd\u529b\u7b49\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"\u5e38\u898b\u7528\u9014"}),"\uff1a"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u8de8\u8a9e\u8a00/\u5e73\u53f0\u4e32\u63a5\uff08Python\u3001Go\u3001Node.js \u7b49\u7686\u53ef\u7528 gRPC client\uff09\u3002"}),"\n",(0,d.jsx)(n.li,{children:"\u9ad8\u6548\u80fd\u3001\u578b\u614b\u5b89\u5168\u7684\u5206\u6563\u5f0f AI \u670d\u52d9\u3002"}),"\n",(0,d.jsx)(n.li,{children:"\u652f\u63f4\u591a\u7a2e\u4e32\u6d41\u5834\u666f\uff08\u5982 LLM \u56de\u61c9\u3001\u8cc7\u6599\u540c\u6b65\u7b49\uff09\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u9032\u968e\u8a2d\u8a08\u8207\u5be6\u4f5c\u7d30\u7bc0\uff0c\u8acb\u53c3\u8003 ",(0,d.jsx)(n.a,{href:"https://github.com/JiHungLin/llmbrick/blob/main/llmbrick/core/brick.py",children:"llmbrick/core/brick.py"})," \u53ca ",(0,d.jsx)(n.a,{href:"https://github.com/JiHungLin/llmbrick/tree/main/llmbrick/protocols/grpc",children:"proto \u5b9a\u7fa9"}),"\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"4-\u578b\u5225\u5b9a\u7fa9\u8207\u8cc7\u6599\u7d50\u69cb",children:"4. \u578b\u5225\u5b9a\u7fa9\u8207\u8cc7\u6599\u7d50\u69cb"}),"\n",(0,d.jsx)(n.h3,{id:"41-conversationsserequest\u4e3b\u578b\u614b",children:"4.1 ConversationSSERequest\uff08\u4e3b\u578b\u614b\uff09"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u6b04\u4f4d"}),(0,d.jsx)(n.th,{children:"\u578b\u5225"}),(0,d.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,d.jsx)(n.th,{children:"\u8aaa\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"model"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"\u6307\u5b9a\u6a21\u578b\u540d\u7a31 (\u5982 'gpt-4o')"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"messages"}),(0,d.jsx)(n.td,{children:"List[Message]"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"\u8a0a\u606f\u9663\u5217\uff0c\u8a73\u898b\u4e0b\u65b9 Message"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"stream"}),(0,d.jsx)(n.td,{children:"bool"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"\u662f\u5426\u555f\u7528\u4e32\u6d41\uff0c\u5fc5\u9808\u70ba True"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"clientId"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u5ba2\u6236\u7aef\u8b58\u5225\u78bc (\u9078\u586b)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"sessionId"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"\u5c0d\u8a71 session id"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"temperature"}),(0,d.jsx)(n.td,{children:"float"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u56de\u61c9\u591a\u6a23\u6027 (\u9078\u586b)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"maxTokens"}),(0,d.jsx)(n.td,{children:"int"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u751f\u6210\u6700\u5927 token \u6578 (\u9078\u586b)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"tools"}),(0,d.jsx)(n.td,{children:"List[Any]"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u5de5\u5177\u5217\u8868 (\u9078\u586b)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"toolChoice"}),(0,d.jsx)(n.td,{children:"Any"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u5de5\u5177\u9078\u64c7 (\u9078\u586b)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"sourceLanguage"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u6e90\u8a9e\u8a00 (\u9078\u586b)"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u7bc4\u4f8b\uff1a"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "model": "gpt-4o",\n  "messages": [\n    {"role": "system", "content": "You are a helpful assistant."},\n    {"role": "user", "content": "What is the weather like today?"}\n  ],\n  "stream": true,\n  "clientId": "client123",\n  "sessionId": "1234567890",\n  "temperature": 0.7,\n  "maxTokens": 100\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"42-conversationsseresponse\u4e3b\u578b\u614b",children:"4.2 ConversationSSEResponse\uff08\u4e3b\u578b\u614b\uff09"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u6b04\u4f4d"}),(0,d.jsx)(n.th,{children:"\u578b\u5225"}),(0,d.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,d.jsx)(n.th,{children:"\u8aaa\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"id"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"\u552f\u4e00\u8b58\u5225\u78bc"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"type"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"\u8cc7\u6599\u985e\u578b\uff0c\u5982 'text', 'meta', 'done'"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"model"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u56de\u61c9\u7684\u6a21\u578b\u540d\u7a31 (\u9078\u586b)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"text"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u672c\u6b21\u4e32\u6d41\u65b0\u6587\u672c (\u9078\u586b)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"progress"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"\u9032\u5ea6\u72c0\u614b\uff0c\u5982 'IN_PROGRESS', 'DONE'"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"context"}),(0,d.jsx)(n.td,{children:"SSEContext"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u4e0a\u4e0b\u6587\u8cc7\u8a0a (\u9078\u586b\uff0c\u8a73\u898b\u4e0b\u65b9 SSEContext)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"metadata"}),(0,d.jsx)(n.td,{children:"SSEResponseMetadata"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u8f14\u52a9\u8cc7\u8a0a (\u9078\u586b\uff0c\u8a73\u898b\u4e0b\u65b9 SSEResponseMetadata)"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u7bc4\u4f8b\uff1a"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "id": "1",\n  "type": "text",\n  "model": "gpt-4o",\n  "text": "Hello, this is a streaming response.",\n  "progress": "IN_PROGRESS",\n  "context": {\n    "conversationId": "1234567890",\n    "cursor": "abcdefg12345"\n  },\n  "metadata": {\n    "searchResults": {"results": ["result1", "result2"]},\n    "attachments": [\n      {"type": "image", "url": "http://example.com/image.jpg"}\n    ]\n  }\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"43-\u5b50\u578b\u614b\u8aaa\u660e",children:"4.3 \u5b50\u578b\u614b\u8aaa\u660e"}),"\n",(0,d.jsx)(n.h4,{id:"message",children:"Message"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u6b04\u4f4d"}),(0,d.jsx)(n.th,{children:"\u578b\u5225"}),(0,d.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,d.jsx)(n.th,{children:"\u8aaa\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"role"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"\u8a0a\u606f\u89d2\u8272\uff0c\u5982 'system', 'user', 'assistant'"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"content"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{children:"\u2714"}),(0,d.jsx)(n.td,{children:"\u8a0a\u606f\u5167\u5bb9"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u7bc4\u4f8b\uff1a"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{"role": "user", "content": "What is the weather like today?"}\n'})}),"\n",(0,d.jsx)(n.h4,{id:"ssecontext",children:"SSEContext"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u6b04\u4f4d"}),(0,d.jsx)(n.th,{children:"\u578b\u5225"}),(0,d.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,d.jsx)(n.th,{children:"\u8aaa\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"conversationId"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u5c0d\u8a71ID (\u9078\u586b)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"cursor"}),(0,d.jsx)(n.td,{children:"str"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u6e38\u6a19 (\u9078\u586b)"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u7bc4\u4f8b\uff1a"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{"conversationId": "1234567890", "cursor": "abcdefg12345"}\n'})}),"\n",(0,d.jsx)(n.h4,{id:"sseresponsemetadata",children:"SSEResponseMetadata"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u6b04\u4f4d"}),(0,d.jsx)(n.th,{children:"\u578b\u5225"}),(0,d.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,d.jsx)(n.th,{children:"\u8aaa\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"searchResults"}),(0,d.jsx)(n.td,{children:"Any"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u641c\u5c0b\u7d50\u679c (\u9078\u586b)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"attachments"}),(0,d.jsx)(n.td,{children:"Any"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"\u9644\u4ef6 (\u9078\u586b)"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u7bc4\u4f8b\uff1a"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "searchResults": {"results": ["result1", "result2"]},\n  "attachments": [\n    {"type": "image", "url": "http://example.com/image.jpg"}\n  ]\n}\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"44-\u6b04\u4f4d\u547d\u540d\u8207-json-\u683c\u5f0f",children:"4.4 \u6b04\u4f4d\u547d\u540d\u8207 JSON \u683c\u5f0f"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u652f\u63f4 Python snake_case \u53ca JSON camelCase\uff08\u5982 ",(0,d.jsx)(n.code,{children:"session_id"})," \u5c0d\u61c9 ",(0,d.jsx)(n.code,{children:"sessionId"}),"\uff09\u3002"]}),"\n",(0,d.jsx)(n.li,{children:"\u8acb\u4f9d\u5be6\u969b API \u6587\u4ef6\u8207\u7a0b\u5f0f\u78bc\u540c\u6b65\u3002"}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"5-\u932f\u8aa4\u8655\u7406\u8207\u56de\u5831",children:"5. \u932f\u8aa4\u8655\u7406\u8207\u56de\u5831"}),"\n",(0,d.jsx)(n.h3,{id:"http-\u6a19\u6e96\u72c0\u614b\u78bc",children:"HTTP \u6a19\u6e96\u72c0\u614b\u78bc"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u540d\u7a31"}),(0,d.jsx)(n.th,{children:"\u4ee3\u78bc"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"SUCCESS"}),(0,d.jsx)(n.td,{children:"200"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"BAD_REQUEST"}),(0,d.jsx)(n.td,{children:"400"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"UNAUTHORIZED"}),(0,d.jsx)(n.td,{children:"401"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"NOT_FOUND"}),(0,d.jsx)(n.td,{children:"404"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"INTERNAL_ERROR"}),(0,d.jsx)(n.td,{children:"500"})]})]})]}),"\n",(0,d.jsx)(n.h3,{id:"\u6846\u67b6\u7279\u5b9a\u932f\u8aa4\u78bc",children:"\u6846\u67b6\u7279\u5b9a\u932f\u8aa4\u78bc"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"\u540d\u7a31"}),(0,d.jsx)(n.th,{children:"\u4ee3\u78bc"}),(0,d.jsx)(n.th,{children:"\u8aaa\u660e"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"VALIDATION_ERROR"}),(0,d.jsx)(n.td,{children:"2000"}),(0,d.jsx)(n.td,{children:"\u9a57\u8b49\u932f\u8aa4"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"PARAMETER_MISSING"}),(0,d.jsx)(n.td,{children:"2002"}),(0,d.jsx)(n.td,{children:"\u53c3\u6578\u7f3a\u5931"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"MODEL_ERROR"}),(0,d.jsx)(n.td,{children:"4000"}),(0,d.jsx)(n.td,{children:"\u6a21\u578b\u932f\u8aa4"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"MODEL_NOT_FOUND"}),(0,d.jsx)(n.td,{children:"4001"}),(0,d.jsx)(n.td,{children:"\u6a21\u578b\u672a\u627e\u5230"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"EXTERNAL_SERVICE_ERROR"}),(0,d.jsx)(n.td,{children:"5000"}),(0,d.jsx)(n.td,{children:"\u5916\u90e8\u670d\u52d9\u932f\u8aa4"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"RESOURCE_NOT_FOUND"}),(0,d.jsx)(n.td,{children:"6001"}),(0,d.jsx)(n.td,{children:"\u8cc7\u6e90\u672a\u627e\u5230"})]})]})]}),"\n",(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u5b8c\u6574\u932f\u8aa4\u78bc\u8acb\u53c3\u8003 ",(0,d.jsx)(n.a,{href:"https://github.com/JiHungLin/llmbrick/blob/main/llmbrick/core/error_codes.py",children:"llmbrick/core/error_codes.py (GitHub)"}),"\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h3,{id:"\u5e38\u898b\u932f\u8aa4\u60c5\u5883",children:"\u5e38\u898b\u932f\u8aa4\u60c5\u5883"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"406 Not Acceptable"}),"\uff1a\u8acb\u6c42 header \u7f3a\u5c11 ",(0,d.jsx)(n.code,{children:"Accept: text/event-stream"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"422 Unprocessable Entity"}),"\uff1a\u8acb\u6c42\u683c\u5f0f\u4e0d\u7b26 ",(0,d.jsx)(n.code,{children:"ConversationSSERequest"}),"\uff0c\u6216\u7f3a\u5c11 ",(0,d.jsx)(n.code,{children:"sessionId"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u696d\u52d9\u9a57\u8b49\u5931\u6557"}),"\uff1a\u6a21\u578b\u540d\u7a31\u4e0d\u5728\u5141\u8a31\u6e05\u55ae\u3001\u8a0a\u606f\u7d50\u69cb\u932f\u8aa4"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Handler \u7570\u5e38"}),"\uff1a\u56de\u50b3\u578b\u5225\u932f\u8aa4\u3001\u672a\u6b63\u78ba yield ",(0,d.jsx)(n.code,{children:"ConversationSSEResponse"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u6a21\u578b\u932f\u8aa4"}),"\uff1a\u6a21\u578b\u540d\u7a31\u932f\u8aa4\u3001\u6a21\u578b\u670d\u52d9\u7570\u5e38"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u5916\u90e8\u670d\u52d9\u932f\u8aa4"}),"\uff1a\u4e32\u63a5\u5916\u90e8 API \u5931\u6557"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"\u8cc7\u6e90\u672a\u627e\u5230"}),"\uff1a\u8acb\u6c42\u8cc7\u6e90\u4e0d\u5b58\u5728"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u932f\u8aa4\u683c\u5f0f\u8207\u8655\u7406\u5efa\u8b70",children:"\u932f\u8aa4\u683c\u5f0f\u8207\u8655\u7406\u5efa\u8b70"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\u56de\u61c9\u578b\u5225 ",(0,d.jsx)(n.code,{children:'type: "error"'}),"\uff0c",(0,d.jsx)(n.code,{children:"text"})," \u70ba\u932f\u8aa4\u8a0a\u606f\uff0c",(0,d.jsx)(n.code,{children:"metadata.attachments"})," \u53ef\u5e36\u932f\u8aa4\u7d30\u7bc0\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u5efa\u8b70\u524d\u7aef\u6839\u64da ",(0,d.jsx)(n.code,{children:"type"})," \u8207 ",(0,d.jsx)(n.code,{children:"progress"})," \u5224\u65b7\u662f\u5426\u70ba\u932f\u8aa4\u4e8b\u4ef6\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:["\u932f\u8aa4\u78bc\u53ef\u65bc ",(0,d.jsx)(n.code,{children:"metadata.attachments"})," \u5167\u5e36\u51fa\uff0c\u4fbf\u65bc\u524d\u7aef\u81ea\u52d5\u5316\u8655\u7406\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h4,{id:"\u932f\u8aa4\u56de\u61c9\u7bc4\u4f8b",children:"\u932f\u8aa4\u56de\u61c9\u7bc4\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "id": "validation-error",\n  "type": "error",\n  "text": "\u9a57\u8b49\u932f\u8aa4: sessionId \u7f3a\u5931",\n  "progress": "DONE",\n  "metadata": {\n    "attachments": [\n      { "type": "error", "code": "validation_error", "message": "sessionId \u7f3a\u5931" }\n    ]\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h4,{id:"\u5176\u4ed6\u932f\u8aa4\u56de\u61c9\u7bc4\u4f8b",children:"\u5176\u4ed6\u932f\u8aa4\u56de\u61c9\u7bc4\u4f8b"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "id": "model-error",\n  "type": "error",\n  "text": "\u6a21\u578b\u670d\u52d9\u7570\u5e38",\n  "progress": "DONE",\n  "metadata": {\n    "attachments": [\n      { "type": "error", "code": "model_error", "message": "\u6a21\u578b\u670d\u52d9\u7570\u5e38" }\n    ]\n  }\n}\n'})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n  "id": "external-service-error",\n  "type": "error",\n  "text": "\u5916\u90e8 API \u9023\u7dda\u5931\u6557",\n  "progress": "DONE",\n  "metadata": {\n    "attachments": [\n      { "type": "error", "code": "external_service_error", "message": "\u5916\u90e8 API \u9023\u7dda\u5931\u6557" }\n    ]\n  }\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"troubleshooting-\u6307\u5357",children:"Troubleshooting \u6307\u5357"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u6aa2\u67e5 header\u3001\u8acb\u6c42\u683c\u5f0f\u3001\u5fc5\u586b\u6b04\u4f4d"}),"\n",(0,d.jsx)(n.li,{children:"\u6aa2\u67e5\u6a21\u578b\u540d\u7a31\u3001sessionId \u662f\u5426\u6b63\u78ba"}),"\n",(0,d.jsx)(n.li,{children:"\u6aa2\u67e5\u5916\u90e8\u670d\u52d9\u9023\u7dda\u72c0\u614b"}),"\n",(0,d.jsxs)(n.li,{children:["\u555f\u7528 ",(0,d.jsx)(n.code,{children:"debug_mode=True"})," \u53d6\u5f97\u8a73\u7d30\u932f\u8aa4"]}),"\n",(0,d.jsxs)(n.li,{children:["\u53c3\u8003 ",(0,d.jsx)(n.a,{href:"/llmbrick/docs/documents/servers/sse_server_guide",children:"SSE Server Guide"})," \u5e38\u898b\u554f\u984c"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"6-faq-\u8207\u9032\u968e\u61c9\u7528",children:"6. FAQ \u8207\u9032\u968e\u61c9\u7528"}),"\n",(0,d.jsx)(n.h3,{id:"\u5e38\u898b\u554f\u984c",children:"\u5e38\u898b\u554f\u984c"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Q: \u5982\u4f55\u652f\u63f4\u591a\u6b21\u4e32\u6d41\u56de\u61c9\uff1f"}),(0,d.jsx)(n.br,{}),"\n","A: \u5728 handler \u5167\u591a\u6b21 ",(0,d.jsx)(n.code,{children:"yield ConversationSSEResponse(...)"}),"\uff0c\u6bcf\u6b21\u5373\u70ba\u4e00\u500b SSE event\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Q: \u5982\u4f55\u81ea\u8a02\u56de\u61c9\u683c\u5f0f\uff1f"}),(0,d.jsx)(n.br,{}),"\n","A: \u8acb\u4f9d\u7167 ",(0,d.jsx)(n.code,{children:"ConversationSSEResponse"})," \u7d50\u69cb\u586b\u5165\u6240\u9700\u6b04\u4f4d\uff0c\u652f\u63f4 id/type/text/progress \u7b49\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Q: \u5982\u4f55\u6574\u5408\u81f3\u6b63\u5f0f\u670d\u52d9\uff1f"}),(0,d.jsx)(n.br,{}),"\n","A: \u53ef\u5c07 SSEServer \u6574\u5408\u81f3\u4e3b\u61c9\u7528\u7a0b\u5f0f\uff0c\u6216\u4ee5 Docker \u90e8\u7f72\uff0c\u4e26\u4f9d\u9700\u6c42\u64f4\u5145 handler \u908f\u8f2f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u9032\u968e\u4e32\u63a5\u6280\u5de7",children:"\u9032\u968e\u4e32\u63a5\u6280\u5de7"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u652f\u63f4\u81ea\u8a02\u4e2d\u9593\u4ef6\uff08middleware\uff09\uff0c\u53ef\u6514\u622a/\u8655\u7406\u6240\u6709\u8acb\u6c42\u3002"}),"\n",(0,d.jsx)(n.li,{children:"\u53ef\u7d50\u5408\u591a\u7a2e Brick\uff0c\u5be6\u73fe\u8907\u96dc\u5c0d\u8a71\u6d41\u7a0b\u3002"}),"\n",(0,d.jsx)(n.li,{children:"gRPC \u8207 SSE \u53ef\u7121\u7e2b\u5207\u63db\uff0c\u4fbf\u65bc\u6e2c\u8a66\u8207\u90e8\u7f72\u3002"}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"7-\u53c3\u8003\u8cc7\u6e90",children:"7. \u53c3\u8003\u8cc7\u6e90"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"/llmbrick/docs/documents/servers/sse_server_guide",children:"SSE Server Guide"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"../category/bricks/",children:"Bricks \u6587\u4ef6"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://github.com/JiHungLin/llmbrick/tree/main/llmbrick/protocols/grpc",children:"gRPC proto \u5b9a\u7fa9"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://developer.mozilla.org/zh-TW/docs/Web/API/Server-sent_events",children:"SSE \u898f\u7bc4\uff08MDN\uff09"})}),"\n"]}),"\n",(0,d.jsx)(n.hr,{})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var r=s(6540);const d={},i=r.createContext(d);function l(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);