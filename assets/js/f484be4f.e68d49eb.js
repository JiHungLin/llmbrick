"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[660],{5903:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/openai_chatbot-ba8391c56b0c6907853740cb3c8432bb.gif"},6686:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>o,frontMatter:()=>c,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"quickstart/simple_openai_chatbot","title":"OpenAI \u804a\u5929\u6a5f\u5668\u4eba\u5feb\u901f\u5165\u9580","description":"GitHub \u7bc4\u4f8b\u7a0b\u5f0f\u78bc","source":"@site/docs/quickstart/simple_openai_chatbot.md","sourceDirName":"quickstart","slug":"/quickstart/simple_openai_chatbot","permalink":"/llmbrick/docs/quickstart/simple_openai_chatbot","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"sidebar_label":"OpenAI \u804a\u5929\u6a5f\u5668\u4eba"},"sidebar":"quickstartSidebar","previous":{"title":"\u7ffb\u8b6f TranslateBrick \u5b9a\u7fa9","permalink":"/llmbrick/docs/quickstart/translate_brick_define"}}');var s=r(4848),l=r(8453);const c={sidebar_position:9,sidebar_label:"OpenAI \u804a\u5929\u6a5f\u5668\u4eba"},d="OpenAI \u804a\u5929\u6a5f\u5668\u4eba\u5feb\u901f\u5165\u9580",t={},h=[{value:"1. \u7bc4\u4f8b\u7c21\u4ecb",id:"1-\u7bc4\u4f8b\u7c21\u4ecb",level:2},{value:"2. \u57f7\u884c\u6b65\u9a5f",id:"2-\u57f7\u884c\u6b65\u9a5f",level:2},{value:"(1) \u8a2d\u5b9a OpenAI API \u91d1\u9470",id:"1-\u8a2d\u5b9a-openai-api-\u91d1\u9470",level:3},{value:"(2) \u555f\u52d5\u804a\u5929\u6a5f\u5668\u4eba SSE \u670d\u52d9",id:"2-\u555f\u52d5\u804a\u5929\u6a5f\u5668\u4eba-sse-\u670d\u52d9",level:3},{value:"(3) \u958b\u555f\u6e2c\u8a66\u9801\u9762",id:"3-\u958b\u555f\u6e2c\u8a66\u9801\u9762",level:3},{value:"3. \u7a0b\u5f0f\u67b6\u69cb\u8207\u91cd\u9ede\u8aaa\u660e",id:"3-\u7a0b\u5f0f\u67b6\u69cb\u8207\u91cd\u9ede\u8aaa\u660e",level:2},{value:"(1) SSE Server \u8207 OpenAI GPT Brick \u6574\u5408",id:"1-sse-server-\u8207-openai-gpt-brick-\u6574\u5408",level:3},{value:"(2) \u652f\u63f4 gRPC \u9060\u7aef\u547c\u53eb",id:"2-\u652f\u63f4-grpc-\u9060\u7aef\u547c\u53eb",level:3},{value:"(3) \u4e32\u6d41\u56de\u61c9\u8207\u932f\u8aa4\u8655\u7406",id:"3-\u4e32\u6d41\u56de\u61c9\u8207\u932f\u8aa4\u8655\u7406",level:3},{value:"4. \u4ecb\u9762\u7279\u8272",id:"4-\u4ecb\u9762\u7279\u8272",level:2},{value:"5. \u5e38\u898b\u554f\u984c",id:"5-\u5e38\u898b\u554f\u984c",level:2},{value:"6. \u76f8\u95dc\u6587\u4ef6\u8207\u5ef6\u4f38\u95b1\u8b80",id:"6-\u76f8\u95dc\u6587\u4ef6\u8207\u5ef6\u4f38\u95b1\u8b80",level:2}];function a(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"openai-\u804a\u5929\u6a5f\u5668\u4eba\u5feb\u901f\u5165\u9580",children:"OpenAI \u804a\u5929\u6a5f\u5668\u4eba\u5feb\u901f\u5165\u9580"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/JiHungLin/llmbrick/tree/main/examples/openai_chatbot",children:"GitHub \u7bc4\u4f8b\u7a0b\u5f0f\u78bc"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:r(5903).A+"",width:"1288",height:"1310"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-\u7bc4\u4f8b\u7c21\u4ecb",children:"1. \u7bc4\u4f8b\u7c21\u4ecb"}),"\n",(0,s.jsx)(n.p,{children:"\u672c\u6559\u5b78\u5c07\u5e36\u4f60\u5feb\u901f\u4e0a\u624b\u5982\u4f55\u4f7f\u7528 LLMBrick \u6846\u67b6\uff0c\u7d50\u5408 OpenAI GPT Brick \u8207 SSE Server\uff0c\u6253\u9020\u4e00\u500b\u5373\u6642\u4e32\u6d41\u56de\u61c9\u7684\u804a\u5929\u6a5f\u5668\u4eba\u3002\u6b64\u7bc4\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6574\u5408 OpenAI GPT Brick \u8207 SSE \u670d\u52d9"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u63f4\u5373\u6642\u4e32\u6d41\u56de\u61c9\u8207\u7d2f\u7a4d\u986f\u793a"}),"\n",(0,s.jsx)(n.li,{children:"\u81ea\u52d5\u5075\u6e2c\u7cfb\u7d71\u8a9e\u8a00"}),"\n",(0,s.jsx)(n.li,{children:"\u6df1\u8272/\u6dfa\u8272\u4e3b\u984c\u5207\u63db"}),"\n",(0,s.jsx)(n.li,{children:"\u5b8c\u6574\u932f\u8aa4\u8655\u7406\u8207\u958b\u767c\u8005\u9ad4\u9a57"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-\u57f7\u884c\u6b65\u9a5f",children:"2. \u57f7\u884c\u6b65\u9a5f"}),"\n",(0,s.jsx)(n.h3,{id:"1-\u8a2d\u5b9a-openai-api-\u91d1\u9470",children:"(1) \u8a2d\u5b9a OpenAI API \u91d1\u9470"}),"\n",(0,s.jsx)(n.p,{children:"\u8acb\u5148\u65bc\u7d42\u7aef\u6a5f\u8a2d\u5b9a\u4f60\u7684 OpenAI API \u91d1\u9470\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export OPENAI_API_KEY=your_api_key_here\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-\u555f\u52d5\u804a\u5929\u6a5f\u5668\u4eba-sse-\u670d\u52d9",children:"(2) \u555f\u52d5\u804a\u5929\u6a5f\u5668\u4eba SSE \u670d\u52d9"}),"\n",(0,s.jsx)(n.p,{children:"\u65bc\u5c08\u6848\u6839\u76ee\u9304\u57f7\u884c\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python examples/openai_chatbot/openai_chatbot.py\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-\u958b\u555f\u6e2c\u8a66\u9801\u9762",children:"(3) \u958b\u555f\u6e2c\u8a66\u9801\u9762"}),"\n",(0,s.jsx)(n.p,{children:"\u555f\u52d5\u5f8c\uff0c\u65bc\u700f\u89bd\u5668\u958b\u555f\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"http://127.0.0.1:8000/\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5373\u53ef\u770b\u5230\u5373\u6642\u804a\u5929\u4ecb\u9762\uff0c\u5de6\u5074\u70ba\u4e8b\u4ef6\u4e32\u6d41\uff0c\u53f3\u5074\u70ba\u7d2f\u7a4d\u56de\u61c9\u3002"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-\u7a0b\u5f0f\u67b6\u69cb\u8207\u91cd\u9ede\u8aaa\u660e",children:"3. \u7a0b\u5f0f\u67b6\u69cb\u8207\u91cd\u9ede\u8aaa\u660e"}),"\n",(0,s.jsx)(n.h3,{id:"1-sse-server-\u8207-openai-gpt-brick-\u6574\u5408",children:"(1) SSE Server \u8207 OpenAI GPT Brick \u6574\u5408"}),"\n",(0,s.jsxs)(n.p,{children:["\u4e3b\u7a0b\u5f0f ",(0,s.jsx)(n.a,{href:"../../../../examples/openai_chatbot/openai_chatbot.py",children:(0,s.jsx)(n.code,{children:"openai_chatbot.py"})})," \u4ee5 ",(0,s.jsx)(n.code,{children:"SSEServer"})," \u555f\u52d5 HTTP \u670d\u52d9\uff0c\u4e26\u5c07 ",(0,s.jsx)(n.code,{children:"ChatHandler"})," \u8a3b\u518a\u70ba\u804a\u5929\u8acb\u6c42\u8655\u7406\u5668\u3002",(0,s.jsx)(n.code,{children:"ChatHandler"})," \u6703\u5c07\u7528\u6236\u8a0a\u606f\u8f49\u63db\u70ba LLMRequest\uff0c\u547c\u53eb OpenAIGPTBrick \u9032\u884c\u4e32\u6d41\u56de\u61c9\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# \u555f\u52d5 SSE \u670d\u52d9\u5668\nconfig = SSEServerConfig(\n    host="127.0.0.1",\n    port=8000,\n    debug_mode=True,\n    allowed_models=["gpt-4o", "gpt-3.5-turbo"],\n    ...\n)\nserver = SSEServer(config=config, enable_test_page=True)\nhandler = ChatHandler()\nserver.set_handler(handler.handle_chat)\nserver.run()\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2-\u652f\u63f4-grpc-\u9060\u7aef\u547c\u53eb",children:"(2) \u652f\u63f4 gRPC \u9060\u7aef\u547c\u53eb"}),"\n",(0,s.jsxs)(n.p,{children:["\u5982\u9700\u5c07 OpenAI GPT Brick \u4ee5 gRPC \u65b9\u5f0f\u90e8\u7f72\uff0c\u53ef\u53c3\u8003 ",(0,s.jsx)(n.a,{href:"../../../../examples/openai_chatbot/grpc_server.py",children:(0,s.jsx)(n.code,{children:"grpc_server.py"})}),"\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from llmbrick.bricks.llm.openai_llm import OpenAIGPTBrick\nfrom llmbrick.servers.grpc.server import GrpcServer\n\ngrpc_server = GrpcServer(port=50051)\nopenai_brick = OpenAIGPTBrick(\n    model_id="gpt-4o",\n    api_key=os.getenv("OPENAI_API_KEY")\n)\ngrpc_server.register_service(openai_brick)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"3-\u4e32\u6d41\u56de\u61c9\u8207\u932f\u8aa4\u8655\u7406",children:"(3) \u4e32\u6d41\u56de\u61c9\u8207\u932f\u8aa4\u8655\u7406"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u652f\u63f4 SSE \u4e32\u6d41\u56de\u50b3\uff0c\u524d\u7aef\u53ef\u5373\u6642\u986f\u793a LLM \u56de\u61c9\u7247\u6bb5"}),"\n",(0,s.jsx)(n.li,{children:"\u5b8c\u6574\u7684\u932f\u8aa4\u8655\u7406\uff0c\u5305\u542b\u6a21\u578b\u9a57\u8b49\u3001API \u932f\u8aa4\u3001\u7cfb\u7d71\u7570\u5e38\u7b49"}),"\n",(0,s.jsx)(n.li,{children:"\u652f\u63f4\u591a\u7a2e OpenAI \u6a21\u578b\uff08\u5982 gpt-4o\u3001gpt-3.5-turbo\uff09"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-\u4ecb\u9762\u7279\u8272",children:"4. \u4ecb\u9762\u7279\u8272"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5373\u6642\u4e32\u6d41"}),"\uff1a\u5de6\u5074\u986f\u793a\u4e8b\u4ef6\u6d41\uff0c\u53f3\u5074\u7d2f\u7a4d\u56de\u61c9"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4e3b\u984c\u5207\u63db"}),"\uff1a\u81ea\u52d5\u5075\u6e2c\u6df1\u8272/\u6dfa\u8272\u4e3b\u984c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u591a\u8a9e\u7cfb\u652f\u63f4"}),"\uff1a\u81ea\u52d5\u5075\u6e2c\u7cfb\u7d71\u8a9e\u8a00"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u958b\u767c\u8005\u53cb\u5584"}),"\uff1a\u8a73\u7d30\u932f\u8aa4\u8cc7\u8a0a\u3001API \u65e5\u8a8c"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-\u5e38\u898b\u554f\u984c",children:"5. \u5e38\u898b\u554f\u984c"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Q: \u70ba\u4ec0\u9ebc\u6c92\u6709\u56de\u61c9\uff1f"}),(0,s.jsx)(n.br,{}),"\n","A: \u8acb\u78ba\u8a8d OpenAI API \u91d1\u9470\u6b63\u78ba\uff0c\u4e14\u7db2\u8def\u9023\u7dda\u6b63\u5e38\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Q: \u5982\u4f55\u5207\u63db\u4f7f\u7528\u7684 OpenAI \u6a21\u578b\uff1f"}),(0,s.jsx)(n.br,{}),"\n","A: \u53ef\u65bc\u555f\u52d5\u53c3\u6578 ",(0,s.jsx)(n.code,{children:"allowed_models"})," \u6216\u524d\u7aef\u9078\u55ae\u4e2d\u5207\u63db\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Q: \u5982\u4f55\u81ea\u8a02 SSE Server \u53c3\u6578\uff1f"}),(0,s.jsx)(n.br,{}),"\n","A: \u4fee\u6539 ",(0,s.jsx)(n.code,{children:"SSEServerConfig"})," \u76f8\u95dc\u8a2d\u5b9a\u5373\u53ef\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"6-\u76f8\u95dc\u6587\u4ef6\u8207\u5ef6\u4f38\u95b1\u8b80",children:"6. \u76f8\u95dc\u6587\u4ef6\u8207\u5ef6\u4f38\u95b1\u8b80"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/llmbrick/docs/documents/bricks/llm_brick_guide/openai_llm_brick_guide",children:"OpenAI GPT Brick \u4f7f\u7528\u6307\u5357"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/llmbrick/docs/documents/servers/sse_server_guide",children:"SSE Server \u4f7f\u7528\u6307\u5357"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/llmbrick/docs/quickstart/common_brick_define",children:"CommonBrick \u5b9a\u7fa9\u6559\u5b78"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"\u672c\u6559\u5b78\u6db5\u84cb\u4e86 OpenAI \u804a\u5929\u6a5f\u5668\u4eba\u5f9e\u5b89\u88dd\u3001\u555f\u52d5\u5230\u7a0b\u5f0f\u67b6\u69cb\u7684\u5b8c\u6574\u6d41\u7a0b\uff0c\u9069\u5408\u521d\u5b78\u8005\u8207\u9032\u968e\u958b\u767c\u8005\u5feb\u901f\u4e0a\u624b LLMBrick \u6846\u67b6\u7684\u804a\u5929\u61c9\u7528\u958b\u767c\u3002"})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>d});var i=r(6540);const s={},l=i.createContext(s);function c(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);